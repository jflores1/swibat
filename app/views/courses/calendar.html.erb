<% provide(:title, "#{@course.course_name} Unit Calendar") %>
<div class="row-fluid">
	<%= render partial: 'shared/user_header', locals: {user: @course.user} %>

	<header class="course-header">
		<%= render 'courses/course_header' %>
	</header>

	<% calendar = calendar_for_single_course(@course) %>
	<table class="table table-striped" id="calendar">		
		<tr>
			<td class="title">
				<a id="calendarPrev" onclick="calendarScrollPrev()" class="btn">Prev</a>
			</td>
			<% calendar.each do |month, v| %>
				<td class="month"><%= month.to_s.titlecase %></td>
			<% end %> 
			<td>
				<a id="calendarNext"onclick="calendarScrollNext()" class="btn">Next</a>
			</td>
		</tr>

		<tr>
			<td>Curricular Themes</td>
			<% calendar.each do |month, month_params| %>
				<td>

				</td>
			<% end %> 
			<td></td>
		</tr>

		<tr>
			<td>Essential Questions</td>
			<% calendar.each do |month, month_params| %>
				<td>
					<% if month_params[:units] %>
						<% month_params[:units].each do |unit| %>
							<%= link_to unit.unit_title, [unit.course, unit] %><br />
						<% end %>
					<% end %>
				</td>
			<% end %> 
			<td></td>
		</tr>

		<tr>
			<td>Standards Covered</td>
			<% calendar.each do |month, month_params| %>
				<td>
					<% if month_params[:units] %>
						<% month_params[:units].each do |unit| %>
							
							<% unit.lessons.each do |lesson| %>
	              <%= display_standards_for_lesson lesson %>
	            <% end %>

						<% end %>
					<% end %>
				</td>
			<% end %> 
			<td></td>
		</tr>

		<tr>
			<td>Content</td>
			<% calendar.each do |month, month_params| %>
				<td>
					<% if month_params[:units] %>
						<% month_params[:units].each do |unit| %>
							
							<% unit.content_taught.each do |content| %>
	              <%= content.objective %><br />
	            <% end %>

						<% end %>
					<% end %>
				</td>
			<% end %> 
			<td></td>
		</tr>

		<tr>
			<td>Skills</td>
			<% calendar.each do |month, month_params| %>
				<td>
					<% if month_params[:units] %>
						<% month_params[:units].each do |unit| %>
							
							<% unit.skills_taught.each do |skill| %>
	              <%= skill.objective %><br />
	            <% end %>

						<% end %>
					<% end %>
				</td>
			<% end %> 
			<td></td>
		</tr>

		<tr>
			<td>Assessments</td>
			<% calendar.each do |month, month_params| %>
				<td>
					<% if month_params[:units] %>
						<% month_params[:units].each do |unit| %>
							
							<% unit.assessments.each do |assessment| %>
	              <%= assessment.assessment_name %><br />
	            <% end %>

						<% end %>
					<% end %>
				</td>
			<% end %> 
			<td></td>
		</tr>
	</table>

</div>
<!-- TODO: We need exception handling in case a unit hasn't yet been created -->